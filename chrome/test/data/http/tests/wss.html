<!DOCTYPE html>
<html>
<head>
<title>test wss connection</title>
<script type="text/javascript">

var href = window.location.href;
var portBegin = href.lastIndexOf(':') + 1;
var portEnd = href.lastIndexOf('/');
var port = href.slice(portBegin, portEnd);
var url = 'wss://localhost:' + port + '/websocket/tests/echo';

// Do connection test.
var ws = new WebSocket(url);

ws.onopen = function()
{
  // Set document title to 'PASS'. The test observer catches this title changes
  // to know the result.
  document.title = 'PASS';
}

ws.onclose = function()
{
  // Set document title to 'FAIL'.
  document.title = 'FAIL';
}

function timeOutCallback()
{
  // Set document title to 'FAIL'.
  document.title = 'FAIL';
}

setTimeout(timeOutCallback, 3000);

</script>
</head>
</html>
